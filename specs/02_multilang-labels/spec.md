# 多言語 UI ラベル切替仕様 (Multi-language UI Label Conversion Feature Specification)

## 1. 概要 (Overview)

電子引き継ぎシステムで、言語選択に応じて UI ラベルが切り替わらない問題を解消し、言語コード表示を言語名に置き換える。UI 要素は選択言語に合わせて正しくローカライズされ、言語セレクターには JA/EN/ZH ではなく 日本語/English/中文 を表示する。

## 2. ユーザーシナリオとテスト (User Scenarios & Testing)

### 主要シナリオ
- **シナリオ1**: 中文選択時のラベル切替
  - 言語セレクターで「中文」を選択
  - 全 UI ラベル（ボタン、タイトル、ヒント等）が中文に切替
  - 言語セレクターは「中文」と表示

- **シナリオ2**: 日本語選択時のラベル切替
  - 「日本語」を選択
  - 全 UI ラベルが日本語に切替
  - 言語セレクターは「日本語」と表示

- **シナリオ3**: English 選択時のラベル切替
  - 「English」を選択
  - 全 UI ラベルが英語に切替
  - 言語セレクターは「English」と表示

### テストケース
- 言語変更時に UI ラベルが正しく切替されること
- 言語セレクターがコードではなく言語名を表示すること
- ボタン/タイトル/フォームラベル等がローカライズされること
- 言語切替でクラッシュや文字化けが起きないこと

## 3. 機能要件 (Functional Requirements)

### FR1: UI ラベルのローカライズ
- 全 UI ラベルが選択言語で正しく表示されること
- ラベル文言は言語リソースから動的に読み込むこと
- 日本語/中文/英語の翻訳が整備されていること

### FR2: 言語コード表示の修正
- 言語セレクターは言語名（日本語/中文/English）を表示すること
- UI 上の言語コード表示は言語名に置換すること
- 状態バー等で現在言語を表示する場合も言語名を使用

### FR3: 動的切替
- 言語変更時に UI ラベルが即時更新されること
- ページの再読み込みを発生させないこと
- 切替後も現在の入力状態を維持すること

### FR4: 翻訳リソース管理
- 多言語翻訳リソースを維持すること
- 各言語に必要なラベル翻訳が揃っていること
- 未翻訳は既定文言で補うこと

## 4. 非機能要件 (Non-Functional Requirements)

### NFR1: 性能 (Performance)
- 言語切替の応答は 500ms 未満
- 初回の言語リソース読み込みは 1 秒未満
- ラベル切替で目立つ遅延がないこと

### NFR2: 可用性 (Usability)
- 言語セレクターが明確に表示されていること
- 現在言語が識別しやすいこと
- 翻訳文言は現地の言語習慣に合致すること

### NFR3: 信頼性 (Reliability)
- 言語切替が安定して動作すること
- 言語切替でエラー/クラッシュが発生しないこと
- 翻訳欠落時は既定言語へ正しくフォールバック

## 5. 成功基準 (Success Criteria)

- [ ] UI ラベルが 100% 正しく言語切替される
- [ ] 言語セレクターは言語名（日本語/中文/English）を表示
- [ ] 言語切替応答が 500ms 未満
- [ ] ボタン/タイトル/フォーム等がローカライズされる
- [ ] 切替後にクラッシュや文字化けが起きない
- [ ] 翻訳の正確性が 95% 以上
- [ ] 翻訳欠落時に既定言語へ安全にフォールバック

## 6. 主要エンティティ (Key Entities)

- **言語リソースファイル**：言語翻訳を格納する JSON
- **言語セレクター**：UI 言語を選択する要素
- **ローカライズ機構**：UI ラベルの切替を行うロジック

## 7. 依存関係と前提 (Dependencies & Assumptions)

### 依存関係
- 既存の多言語対応基盤
- 翻訳リソース管理機構
- 現在の UI コンポーネント構成

### 前提
- 基本的な多言語対応が実装済み
- 言語リソースは存在し、不足分は補完可能
- UI はローカライズを前提に設計されている

## 8. エッジケース (Edge Cases)

- 翻訳欠落時は既定言語へフォールバック
- 言語リソースの読み込み失敗時はエラーを表示し既定言語を維持
- 低帯域環境で読み込みが遅い場合は適切な表示を行う
- 翻訳が長く UI を超える場合でも可読性を確保

## 9. 合意済み事項 (Clarifications)

### 2025-11-25 会議決定
- **Q**: 言語リソースの構造は？
  - **A**: JSON のネスト構造で管理し、整理性を確保
- **Q**: ラベルのローカライズはどう行う？
  - **A**: 全ラベルは言語リソースから動的に読み込み、即時更新に対応
