# 研究報告 (Research Report)

## 1. 技術決策 (Technical Decisions)

### 決策1: 圖形用戶界面框架選擇
- **決策**: 使用 Python tkinter
- **理由**:
  - Python 內建庫，無額外依賴
  - 跨平台支援 (Windows, macOS, Linux)
  - 輕量、適合單機桌面應用
  - 與現有 Python 環境完全相容
- **替代方案**:
  - PyQt5/6 (功能強大但增加依賴)
  - Kivy (現代界面但學習曲線較陡)

### 決策2: 資料庫選擇
- **決策**: SQLite
- **理由**:
  - 檔案型資料庫，無需額外伺服器
  - 輕量、適合本地應用
  - Python 內建支援
  - 適用於單機或少量併發場景
- **替代方案**:
  - PostgreSQL/MySQL (功能強大但運維成本高)

### 決策3: ORM 選擇
- **決策**: SQLAlchemy
- **理由**:
  - Python 主流 ORM
  - 與 SQLite 相容
  - 可維持模型與查詢一致性
- **替代方案**:
  - Peewee (較輕量但功能較少)

### 決策4: 多語言支援
- **決策**: JSON 語言資源 + 自訂 LanguageManager
- **理由**:
  - 結構清晰、易維護
  - 適合 tkinter 介面即時切換
  - 方便匯入/匯出管理
- **替代方案**:
  - gettext (標準但配置較複雜)

### 決策5: 密碼安全策略
- **決策**: 使用 bcrypt 進行密碼雜湊
- **理由**:
  - 專為密碼儲存設計
  - 可調整計算成本
  - 含內建加鹽機制
- **替代方案**:
  - PBKDF2
  - Argon2

## 2. 最佳實踐 (Best Practices)

### 界面設計
1. **一致性**: 所有頁面遵循相同的版面與間距規則
2. **可用性**: 操作流程清楚，避免過多跳轉
3. **可讀性**: 文字大小與間距適中
4. **回應性**: 主要操作回應時間 < 500ms

### 數據庫
1. **正規化**: 避免冗餘
2. **索引**: 針對日期/班別/區域常用查詢加速
3. **安全性**: 使用參數化查詢
4. **備份**: 定期備份 SQLite 檔案

### 安全性
1. **輸入驗證**: 所有輸入須驗證
2. **權限控制**: 管理員功能限制
3. **日誌記錄**: 記錄重要操作
4. **密碼雜湊**: 不以明文儲存

## 3. 整合模式 (Integration Patterns)
- GUI 與資料層分離
- 事件驅動更新介面
- 統一語言資源管理

## 4. 效能優化策略
- 避免大量同步操作阻塞 UI
- 使用分頁/分段載入資料表
- 圖表生成採取必要時刷新

## 5. 部署考量
- PyInstaller 打包
- 首次啟動初始化資料庫與管理員
- 保留 `handover_system.db` 與 `handover_settings.json`
