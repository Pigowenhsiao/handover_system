# 調査レポート (Research Report)

## 1. 技術判断 (Technical Decisions)

### 判断1: GUI フレームワーク
- **決定**: Python Tkinter
- **理由**:
  - 標準ライブラリで追加依存が不要
  - クロスプラットフォーム対応 (Windows, macOS, Linux)
  - 軽量で単機アプリに適合
  - 既存 Python 環境と高い互換性
- **代替案**:
  - PyQt5/6（高機能だが依存が増える）
  - Kivy（モダンだが学習コストが高い）

### 判断2: データベース
- **決定**: SQLite
- **理由**:
  - ファイル型 DB でサーバー不要
  - 軽量でローカル運用に適合
  - Python 標準サポート
  - 単機または少数同時利用向け
- **代替案**:
  - PostgreSQL/MySQL（高機能だが運用コストが高い）

### 判断3: ORM
- **決定**: SQLAlchemy
- **理由**:
  - Python 主要 ORM
  - SQLite と互換
  - モデルとクエリの整合性が高い
- **代替案**:
  - Peewee（軽量だが機能は限定的）

### 判断4: 多言語
- **決定**: JSON 言語リソース + 独自 LanguageManager
- **理由**:
  - 構造が明確で保守しやすい
  - Tkinter 画面の即時切替に適合
  - インポート/エクスポートが容易
- **代替案**:
  - gettext（標準だが設定が複雑）

### 判断5: パスワード安全性
- **決定**: bcrypt によるハッシュ
- **理由**:
  - パスワード保存専用の設計
  - 計算コストの調整が可能
  - 内蔵ソルト対応
- **代替案**:
  - PBKDF2
  - Argon2

## 2. ベストプラクティス (Best Practices)

### UI 設計
1. **一貫性**: 全ページで同一の余白/配置ルール
2. **可用性**: 操作フローを明確にし、過度な遷移を避ける
3. **可読性**: 文字サイズと行間の適正化
4. **応答性**: 主要操作の応答は 500ms 未満

### データベース
1. **正規化**: 重複を避ける
2. **索引**: 日付/シフト/エリア検索を高速化
3. **安全性**: パラメータ化クエリの徹底
4. **バックアップ**: SQLite ファイルを定期バックアップ

### セキュリティ
1. **入力検証**: 全入力の検証
2. **権限制御**: 管理者機能の制限
3. **ログ**: 重要操作の記録
4. **パスワード**: 平文保存を禁止

## 3. 統合パターン (Integration Patterns)
- UI とデータ層の分離
- イベント駆動で画面更新
- 言語リソースの一元管理

## 4. パフォーマンス方針
- UI をブロックしない処理設計
- 表の段階的/部分的な読み込み
- チャートは必要時に再描画

## 5. 配布・導入
- PyInstaller でパッケージ化
- 初回起動時に DB と管理者を初期化
- `data/handover_system.db` と `handover_settings.json` を保持
